{{define "title"}}Health Status{{end}}

{{define "page-title"}}{{.Name}} — Health Status{{end}}

{{define "content"}}
    <div id="loading" class="loading">Loading health status...</div>
    
    <div id="error" class="error" style="display: none;">
      <div id="error-message"></div>
    </div>

    <div id="overall-status" class="overall-status" style="display: none;">
      <h2>
        <span class="health-indicator status-healthy">
          HEALTHY
        </span>
      </h2>
      <p>Espelho de São Miguel {{.Version}}</p>
    </div>

    <div id="health-content" style="display: none;">
      <div class="meta">
        <div class="card">
          <div class="k">Service Information</div>
          <div class="health-item">
            <span class="health-label">Service Name</span>
            <span class="health-value" id="service-name">-</span>
          </div>
          <div class="health-item">
            <span class="health-label">Version</span>
            <span class="health-value" id="service-version">-</span>
          </div>
          <div class="health-item">
            <span class="health-label">Overall Status</span>
            <span class="health-value">
              <span class="health-indicator" id="service-status">-</span>
            </span>
          </div>
        </div>
        <div class="card">
          <div class="k">Health Indicators</div>
          <div class="health-item">
            <span class="health-label">Main Health State</span>
            <span class="health-value">
              <span class="health-indicator" id="main-health">-</span>
            </span>
          </div>
          <div class="health-item">
            <span class="health-label">Publish Health</span>
            <span class="health-value">
              <span class="health-indicator" id="publish-health">-</span>
            </span>
          </div>
          <div class="health-item">
            <span class="health-label">Query Health</span>
            <span class="health-value">
              <span class="health-indicator" id="query-health">-</span>
            </span>
          </div>
        </div>
        <div class="card">
          <div class="k">Failure Tracking</div>
          <div class="health-item">
            <span class="health-label">Consecutive Publish Failures</span>
            <span class="health-value" id="publish-failures">-</span>
          </div>
          <div class="health-item">
            <span class="health-label">Consecutive Query Failures</span>
            <span class="health-value" id="query-failures">-</span>
          </div>
          <div class="health-item">
            <span class="health-label">Failure Threshold</span>
            <span class="health-value">10 failures</span>
          </div>
        </div>
        <div class="card">
          <div class="k">Health Legend</div>
          <div class="health-item">
            <span class="health-label">
              <span class="health-indicator health-green">GREEN</span>
            </span>
            <span class="health-value">No failures</span>
          </div>
          <div class="health-item">
            <span class="health-label">
              <span class="health-indicator health-yellow">YELLOW</span>
            </span>
            <span class="health-value">1-9 failures</span>
          </div>
          <div class="health-item">
            <span class="health-label">
              <span class="health-indicator health-red">RED</span>
            </span>
            <span class="health-value">10+ failures</span>
          </div>
        </div>
      </div>
    </div>

    <div class="refresh-info">
      Auto-refreshes every 10 seconds • Last updated: <span id="last-updated">-</span>
    </div>
{{end}}

{{define "extra-js"}}
<script src="/static/js/health-page.js"></script>
{{end}}