<!--
Copyright (c) 2025 Girino Vey.

This software is licensed under Girino's Anarchist License (GAL).
See LICENSE file for full license text.
License available at: https://license.girino.org/

Main page template for Espelho de S√£o Miguel web interface.
-->
{{define "title"}}NIP-11 Relay Info{{end}}


{{define "header-extra"}}
<div style="display:flex;gap:10px;align-items:center">
  {{if .ServiceURL}}<a class="pill" href="{{.ServiceURL}}" target="_blank" rel="noopener">Website</a>{{end}}
  {{if .Contact}}
    <span class="k">Contact:</span>&nbsp;
    {{if .ContactIsLink}}
      <a class="v" href="{{.ContactHref}}" target="_blank" rel="noopener">{{.Contact}}</a>
    {{else}}
      <span class="v">{{.Contact}}</span>
    {{end}}
  {{end}}
</div>
{{end}}

{{define "content"}}
    <div class="meta">
      <div class="card">
        <div class="k">Public key</div>
  <div class="v">{{if .PubKeyNPub}}<a class="v" href="https://njump.me/{{.PubKeyNPub}}" target="_blank" rel="noopener">{{.PubKeyNPub}}</a>{{else}}{{.PubKey}}{{end}}</div>
      </div>
      <div class="card">
        <div class="k">Software / Version</div>
        <div class="v">{{if .SoftwareIsLink}}<a class="v" href="{{.SoftwareHref}}" target="_blank" rel="noopener">{{.Software}}</a>{{else}}{{.Software}}{{end}} ‚Äî {{.Version}}</div>
      </div>
      <div class="card">
        <div class="k">Supported NIPs</div>
        <div class="nips">
          {{range .SupportedNIPs}}<a class="nip" href="https://github.com/nostr-protocol/nips/blob/master/{{printf "%02d" .}}.md" target="_blank" rel="noopener">NIP-{{printf "%02d" .}}</a>{{end}}
        </div>
      </div>
      <div class="card">
        <div class="k">Icon / Banner</div>
        <div class="v">{{if .Icon}}Icon set{{else}}‚Äî{{end}} / {{if .Banner}}Banner set{{else}}‚Äî{{end}}</div>
      </div>
    </div>

  <div class="foldables">
  <section style="margin-top:18px" class="card">
      <div class="k">Full NIP-11 JSON</div>
      <details id="nip11-details">
        <summary style="cursor:pointer">Show NIP-11 JSON</summary>
        <pre id="nip11" style="white-space:pre-wrap;margin:8px 0 0;color:var(--muted);font-size:0.9rem;background:transparent;border:none;padding:0">(click to load)</pre>
      </details>
      <script src="/static/js/nip11.js"></script>
  </section>

  <section style="margin-top:12px" class="card">
      <div class="k">Monitoring</div>
      <div style="margin-top:8px;display:flex;gap:8px;flex-wrap:wrap">
        <a href="/stats" class="pill">üìä View Stats</a>
        <a href="/health" class="pill">‚ù§Ô∏è Health Status</a>
      </div>
  </section>
  </div>
{{end}}

{{define "extra-js"}}
<script src="/static/js/stats.js"></script>
{{end}}