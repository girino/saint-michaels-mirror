# Copyright (c) 2025 Girino Vey.
# 
# This software is licensed under Girino's Anarchist License (GAL).
# See LICENSE file for full license text.
# License available at: https://license.girino.org/
#
# Example environment configuration for Espelho de São Miguel.

# Example environment for Espelho de São Miguel
# Query remotes used to answer REQ
QUERY_REMOTES=wss://wot.girino.org,wss://nostr.girino.org
# Address to listen on
ADDR=:3337

# Broadcast settings (for event publishing)
# Seed relays for discovery (comma-separated)
# The broadcast system will automatically discover and rank relays from these seeds
# BROADCAST_SEED_RELAYS=wss://relay.damus.io,wss://relay.nostr.band

# Mandatory relays (comma-separated)
# These relays will ALWAYS receive broadcasts, regardless of their performance score
# Useful for ensuring events reach specific relays (e.g., your own relay)
# BROADCAST_MANDATORY_RELAYS=wss://my-essential-relay.com,wss://backup-relay.com

# Maximum number of top relays to publish to (default: 50)
# MAX_PUBLISH_RELAYS=50

# Number of worker goroutines for broadcasting (default: 2 × CPU cores)
# Set to 0 to disable broadcast system (query-only mode)
# BROADCAST_WORKERS=10

# Event cache TTL to prevent duplicate broadcasts (default: 1h)
# BROADCAST_CACHE_TTL=1h

# Periodic refresh interval for relay discovery (default: 24h)
# The broadcast system will periodically rediscover relays from seed relays
# to keep the relay list up to date and find new relays
# BROADCAST_REFRESH_INTERVAL=24h

# Verbose logging control (granular control available in v1.3.0+)
# Examples:
# VERBOSE=1                    # Enable all verbose logging
# VERBOSE=true                 # Enable all verbose logging  
# VERBOSE=all                  # Enable all verbose logging
# VERBOSE=relaystore           # Enable verbose for relaystore module only
# VERBOSE=relaystore.QueryEvents  # Enable verbose for specific method
# VERBOSE=relaystore,mirror    # Enable verbose for multiple modules
# VERBOSE=relaystore.QueryEvents,mirror.StartMirroring  # Enable specific methods
# VERBOSE=                     # Disable all verbose logging (production)
# VERBOSE=0                    # Disable all verbose logging (production)
# VERBOSE=false               # Disable all verbose logging (production)
VERBOSE=0

# Docker Compose configuration
# Port mapping for docker-compose (host:container)
COMPOSE_RELAY_PORT=3337
# Docker image to use (defaults to latest if not set)
# PROD_IMAGE=ghcr.io/girino/saint-michaels-mirror:1.0.0-rc2

# NIP-11 / Relay information
# RELAY_SERVICE_URL can be set to force the relay base URL advertised in NIP-11
RELAY_SERVICE_URL=https://relay.example.org
# RELAY_NAME defaults to "Girino's relay agregator" if not set
RELAY_NAME="Espelho de São Miguel"
RELAY_DESCRIPTION="The Espelho de São Miguel is the sacred mirror that stands between worlds, where every message is received, reflected, and transmitted without distortion under the Archangel’s vigilant gaze. It unites the power of Exu, opener of paths, with the harmony of Ibeji, the divine twins, ensuring that all light crossing its surface returns as truth."
RELAY_CONTACT=npub1xxx
# Software, version and supported_nips are fixed by this binary:
# - Software: https://gitworkshop.dev/npub18lav8fkgt8424rxamvk8qq4xuy9n8mltjtgztv2w44hc5tt9vets0hcfsz/relay.ngit.dev/saint-michaels-mirror
# - Version: 0.1.0-beta
# - Supported NIPs are taken from khatru defaults and are not configurable here

# Optional: Authentication (for upstream relays)
# Required for relays that need authentication to publish events
# Supports both raw hex (64 chars) and nsec bech32 formats
# 
# Raw hex format (64 characters):
# RELAY_SECKEY=a1b2c3d4e5f6789012345678901234567890abcdef1234567890abcdef123456
#
# nsec bech32 format (recommended):
# RELAY_SECKEY=nsec13qrrkw4x0myd68235tdltzm24rmuzwxlwg8w45enlmephxj9y08qrruaax
#
# The relay will automatically authenticate with upstream relays when required
# and use this key to sign authentication events (NIP-42).
RELAY_SECKEY=nsec1xxxxx
RELAY_ICON=static/icon.png
RELAY_BANNER=static/banner.png