# v1.0.0-rc2 (draft)

This release candidate accumulates all changes since the project's inception and prepares for the stable 1.0.0 release.

Summary highlights

- Version bump: embedded version updated to `v1.0.0-rc2`.
- Release process: the workflow now replaces an existing release with the same tag and uploads platform-specific binaries individually.
- Relay features: khatru-based relay command, publish forwarding to remotes, query remotes and pooling, CountMany support gated to NIP‑45-capable remotes, NIP‑11 probing using the Accept header.
- Observability: `/stats` endpoint with separate counters for publishes, queries and counts (internal vs external tracked).

- Add `cmd/khatru-relay` command and `relaystore` forwarding backend to mirror published events to configured remotes.
- Add query remotes (wss defaults) and QueryEvents via a SimplePool; expose CLI flag `--query-remotes`.
- Forward CountEvents to remotes and use pool.CountMany (NIP‑45 semantics) when remotes advertise NIP‑45.
- Add server-side homepage rendering with NIP‑11 information and a foldable `/stats` UI.
- Fix and separate counters for queries vs counts; add metrics for query/count failures and returned events.

Assets & UI
- Improve homepage UI: render contact as mailto/nostr links, show relay npub link, NIP badges linking to nostr-nips.com, responsive layout and stats folding.

Chore / Infrastructure
- Move Version constant into `cmd/khatru-relay` and embed the tag into builds via ldflags in the release workflow.
- Add `run.sh` helper, example `.env`, and tooling to generate favicons.

- Iterated workflows to avoid caching/tar extraction conflicts on runners, pinned Go to 1.24.1, and added job-level permissions for release creation.
- Make release creation idempotent: workflow deletes an existing release and recreates it, then uploads artifacts.
- Fallback to curl-based uploads for environments where marketplace action versions are unavailable.

The full commit history is attached to the release as COMMIT_HISTORY.md. See that file for the complete chronological commit log.


- Add SVG icon variants and generate PNG favicons with rounded masks (40% radius) for modern UIs.
