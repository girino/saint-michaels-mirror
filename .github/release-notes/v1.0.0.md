# v1.0.0 (stable)

Espelho de São Miguel 1.0.0 — where myth meets code. A Nostr relay aggregator that does not store events: it fetches from multiple upstream relays and mirrors them so many voices can be read as one.

Includes all user‑facing changes from v1.0.0‑rc1 through v1.0.0‑rc4.

Summary highlights

- Core goal: mirror, not store — aggregate publish & query across multiple remote relays.
- NIP‑11: served at `/` via content negotiation (Accept: `application/nostr+json`).
- Observability: `/health` and `/stats` (auto‑refresh), with GREEN/YELLOW/RED states and consecutive‑failure tracking.
- Performance: end‑to‑end timing metrics for publish, query, and count (including EnsureRelay/FetchMany and goroutine span).
- UX: human‑readable `/health` and `/stats` pages; consistent two‑column layout; shared base template; polished branding.
- Distribution: complete archives (binaries + static/templates + compose + nginx example + example.env); multi‑arch Docker images and cross‑platform binaries.
- Docs: deployment guide (with `nak` example), verification steps, and curated CHANGELOG.

Changes (grouped)

Features
- Mirror from multiple upstream relays (no local DB), unifying results.
- Forward publishes to configured remotes; aggregate queries across upstreams.
- NIP‑11 exposed at `/` via Accept header.

Observability & Health
- `/stats` with counters for publishes, queries, and counts.
- `/health` reflecting backend state with per‑operation failure counters; overall status derives from worst sub‑status.
- Runtime metrics (goroutines, memory) and consecutive‑failure thresholds (GREEN/YELLOW/RED).

Performance
- Accurate timings for publish, query, and count operations, including end‑to‑end query timing that accounts for EnsureRelay, FetchMany, and goroutine work.

Behavior / Security
- Do not forward internal khatru bookkeeping queries to upstream relays (with explicit exceptions where applicable).

UX & Docs
- Human‑readable `/health` and `/stats` pages with auto‑refresh; shared base template and consistent two‑column layout.
- README updated with project myth and goals; deployment and nginx examples.
- Verification guidance for API endpoints and human‑readable pages; NIP‑11 Accept header and WebSocket URL included.

Distribution
- Complete, ready‑to‑run archives containing binaries, static/templates, Docker Compose, nginx example, and example.env.
- Multi‑arch Docker images and cross‑platform binaries (linux/amd64, linux/arm64, darwin/amd64, darwin/arm64, windows/amd64, windows/arm64).
- Curated CHANGELOG.md included in release assets.

Thanks
- Built on khatru and the Nostr community’s work and ideas.
